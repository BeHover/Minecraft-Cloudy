<!DOCTYPE html>
<html lang="ru">
<head>
    {{ include('include/head.html.twig') }}
    <title>{% block title %}Панель администратора{% endblock %}</title>
</head>
<body>
    {{ include('include/preloader.html.twig') }}
    {{ include('include/nav.html.twig') }}
    {{ include('badges/header.html.twig') }}

    <div class="container-fluid pt-5 pb-2 bg-white d-none">
        <div class="container block-title text-center">
            <div class="row">
                <div class="col-12 mx-auto">
                    <h1>Панель администратора</h1>
                    <p>Добро пожаловать в панель управления, {{ app.user.getUsername() }}!</p>
                </div>
                <div class="col-10 col-lg-4 mx-auto">
                    <img src="https://mc-cloudy.com/public/images/design/wavy-line.png" alt="Wavy line" class="img-fluid" draggable="false" />
                </div>
            </div>
        </div>
    </div>

    <div id="main-content" class="container-fluid landing-block landing-padding bg-white">
        <div class="container">
            <div class="row">
                <div class="d-none d-xxl-block col-xxl-3 mb-4 mb-lg-0 container-wiki">
                    <div class="nav flex-column nav-pills">
                        <a class="nav-link" href="{{ path('admin') }}">Панель управления</a>
                        <div class="divider"></div>
                        <a class="nav-link active" href="{{ path('admin_reports') }}">Служба поддержки</a>
                        <a class="nav-link" href="{{ path('admin_players') }}">Аккаунты игроков</a>
                        <div class="divider"></div>
                        <a class="nav-link" href="{{ path('admin_global') }}">Параметры сайта</a>
                    </div>
                </div>
                <div class="col-12 col-xxl-9">
                    {% if reports|length > 0 %}
                        <a class="back d-xxl-none" href="{{ path('admin') }}">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.29289 13.7071C5.68342 14.0976 6.31658 14.0976 6.70711 13.7071C7.09763 13.3166 7.09763 12.6834 6.70711 12.2929L3.41421 9L15 9C15.5523 9 16 8.55228 16 8C16 7.44772 15.5523 7 15 7L3.41421 7L6.70711 3.70711C7.09763 3.31658 7.09763 2.68342 6.70711 2.29289C6.31658 1.90237 5.68342 1.90237 5.29289 2.29289L0.292893 7.29289C-0.0976328 7.68342 -0.0976329 8.31658 0.292893 8.70711L5.29289 13.7071Z" fill="#79797A"></path></svg>
                            Вернуться назад
                        </a>
                        <div class="reports">
                            <div class="row">
                                {% for report in reports %}
                                    <div class="col-12 col-lg-6 d-grid align-items-stretch">
                                        <div class="report-item">
                                            <div class="report-item__header">
                                                <img src="https://mc-cloudy.com/public/images/design/avatars/{{ report.getReporter().getIcon() }}" alt="{{ report.getReporter().getUsername() }} avatar" class="img-fluid" draggable="false" />
                                                <p>{{ report.getReporter().getUsername() }}</p>
                                                <p class="date">{{ report.getCreatedAt().format('d.m.Y') }}</p>
                                            </div>
                                            <div class="report-item__body">
                                                <p class="report-item__title">#{{ report.getId() }} — {{ report.getType().getName() }}</p>
                                                <p class="report-item__text">{{ report.getText() }}</p>
                                            </div>
                                            <div class="report-item__footer d-block d-lg-flex">
                                                {% if report.getStatus() == 0 %}
                                                    <p class="report-item__status d-none d-lg-block"><i class="fas fa-eye-slash"></i>Не просмотрено</p>
                                                    <div class="report-item__buttons">
                                                        <a href="{{ path('admin_view_report', {'id': report.getId()}) }}" class="btn btn-primary col-11 col-sm-4 col-lg-auto">Ответить</a>
                                                    </div>
                                                {% elseif report.getStatus() == 1 %}
                                                    <p class="report-item__status d-none d-lg-block"><i class="fas fa-eye"></i>Добавлен ответ</p>
                                                    <div class="report-item__buttons">
                                                        <a href="{{ path('admin_view_report', {'id': report.getId()}) }}" class="btn btn-secondary col-9 col-sm-3 col-lg-auto">Открыть</a>
                                                        <a href="{{ path('admin_delete_report', {'id': report.getId()}) }}" class="btn btn-primary ms-1 col-auto"><i class="fas fa-trash"></i></a>
                                                    </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="btn-toolbar justify-content-center d-none" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group" role="group" aria-label="First group">
                                <button type="button" class="btn btn-primary px-3 py-1">1</button>
                                <button type="button" class="btn btn-secondary px-3 py-1">2</button>
                                <button type="button" class="btn btn-secondary px-3 py-1">3</button>
                                <button type="button" class="btn btn-secondary px-3 py-1">4</button>
                                <button type="button" class="btn btn-secondary px-3 py-1">5</button>
                            </div>
                        </div>
                    {% else %}
                        <div class="wiki-banner">
                            <h4>В базе нет тикетов</h4>
                            <p>Игроки не подавали запросы в службу поддержки.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    {{ include('include/footer.html.twig') }}
</body>
